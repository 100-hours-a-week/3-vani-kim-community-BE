# ğŸ’¾ Backend Architecture & Engineering Strategy

> **ë¬¸ì„œ ê°œìš”:** 100ë§Œ MAU íŠ¸ë˜í”½ í™˜ê²½ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ëŒ€ëŸ‰ì˜ ë™ì‹œ ì ‘ì†ê³¼ ë°ì´í„° ì“°ê¸° ë¶€í•˜ë¥¼ ê²¬ë””ê¸° ìœ„í•œ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ê³„ ë° ìµœì í™” ì „ëµì„ ê¸°ìˆ í•©ë‹ˆë‹¤.

---

## 1. Domain Model & ERD (Entity Relationship Diagram)

**ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ì„ ê³ ë ¤í•œ ì •ê·œí™” ë° ì¸ë±ì‹± ì „ëµ**
ì‚¬ìš©ì(User), ê²Œì‹œê¸€(Post), ëŒ“ê¸€(Comment), ì¢‹ì•„ìš”(Likes)ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë°ì´í„° ë¬´ê²°ì„±ê³¼ ì¡°íšŒ ì„±ëŠ¥ì˜ ê· í˜•ì„ ë§ì·„ìŠµë‹ˆë‹¤.


![ERD Diagram](./images/erd_diagram.png)

* **User:** JWT ê¸°ë°˜ ì¸ì¦ì„ ìœ„í•œ ìµœì†Œí•œì˜ ì •ë³´ ì €ì¥
* **Post & Comment:** 1:N ê´€ê³„, í˜ì´ì§• ì¿¼ë¦¬ ì„±ëŠ¥ì„ ìœ„í•œ ì¸ë±ìŠ¤ ìµœì í™”
* **Likes:** ë™ì‹œì„± ì œì–´ê°€ í•µì‹¬ì¸ ì—”í‹°í‹° (Redisë¡œ ë¶€í•˜ ë¶„ì‚°)

---

## 2. Key Engineering Challenges & Solutions

ë‹¨ìˆœí•œ CRUD êµ¬í˜„ì„ ë„˜ì–´, ê³ íŠ¸ë˜í”½ ìƒí™©ì—ì„œì˜ ë³‘ëª© ì§€ì ì„ í•´ê²°í•œ ê³¼ì •ì…ë‹ˆë‹¤.

### ğŸš€ Challenge 1: ì¢‹ì•„ìš”(Likes) ë™ì‹œì„± ì´ìŠˆì™€ DB ë³‘ëª© í•´ê²°
> **ë¬¸ì œ ìƒí™©:** ì¸ê¸° ê²Œì‹œê¸€ì˜ ê²½ìš° ìˆ˜ì²œ ëª…ì˜ ìœ ì €ê°€ ë™ì‹œì— 'ì¢‹ì•„ìš”'ë¥¼ ëˆ„ë¥¼ ìˆ˜ ìˆìŒ. [cite_start]ì´ë•Œ RDS(MySQL)ì˜ Row Lock ê²½í•©ì´ ë°œìƒí•˜ì—¬ ì „ì²´ DB ì„±ëŠ¥ ì €í•˜ ìœ ë°œ ê°€ëŠ¥ì„±[cite: 1038, 1041].

* **í•´ê²° ì „ëµ: Write-Back Caching with Redis**
    1.  [cite_start]**Redis Set ìë£Œêµ¬ì¡° í™œìš©:** `like:users:{postId}` í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µ 'ì¢‹ì•„ìš”' ë°©ì§€ ë° ì¹´ìš´íŒ…ì„ ë©”ëª¨ë¦¬ì—ì„œ ì¦‰ì‹œ ì²˜ë¦¬[cite: 1048, 1050].
    2.  **ë¹„ë™ê¸° ë™ê¸°í™”:** Redisì— ìŒ“ì¸ ë°ì´í„°ë¥¼ ì¼ì • ì£¼ê¸° ë˜ëŠ” ì„ê³„ê°’ ë„ë‹¬ ì‹œ RDSë¡œ ì¼ê´„ ë°˜ì˜(Batch Update)í•˜ì—¬ DB ë¶€í•˜ ìµœì†Œí™”.
    3.  **íš¨ê³¼:** RDSì˜ ì“°ê¸° ë¶€í•˜ë¥¼ íšê¸°ì ìœ¼ë¡œ ì¤„ì´ê³ , ì‚¬ìš©ìì—ê²ŒëŠ” ì§€ì—° ì—†ëŠ” ë°˜ì‘ì„± ì œê³µ.

### ğŸ›¡ï¸ Challenge 2: ì¸ì¦/ì¸ê°€ ë¡œì§ì˜ ë¶„ë¦¬ (Serverless Offloading)
> **ë¬¸ì œ ìƒí™©:** ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•´ ì„œë²„ë¥¼ ê±°ì¹  ê²½ìš°, CPU/Memory ë¦¬ì†ŒìŠ¤ê°€ íŒŒì¼ ì²˜ë¦¬ì— ì ì‹ë¨. [cite_start]ë˜í•œ ë‹¨ìˆœ ê¶Œí•œ í™•ì¸ì„ ìœ„í•´ ë¬´ê±°ìš´ Spring Boot ì„œë²„ê°€ ê°œì…í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì [cite: 22, 23].

* **í•´ê²° ì „ëµ: Lambda & Presigned URL**
    1.  [cite_start]**Lambda ë¶„ë¦¬:** ì¸ì¦ëœ ì‚¬ìš©ìì—ê²Œ S3 ì—…ë¡œë“œ ê¶Œí•œ(Presigned URL)ì„ ë°œê¸‰í•˜ëŠ” ë¡œì§ì„ Node.js Lambda í•¨ìˆ˜ë¡œ ë¶„ë¦¬[cite: 1181].
    2.  [cite_start]**API Gateway Authorizer:** ì´ˆê¸°ì—ëŠ” Lambda ë‚´ë¶€ì—ì„œ JWTë¥¼ ê²€ì¦í–ˆìœ¼ë‚˜, ë¹„ìš© ì ˆê°ê³¼ ì±…ì„ ë¶„ë¦¬ë¥¼ ìœ„í•´ API Gatewayë‹¨ì—ì„œ ì¸ì¦ì„ ë¨¼ì € ì²˜ë¦¬í•˜ë„ë¡ ì•„í‚¤í…ì²˜ ê°œì„ [cite: 1206].

### ğŸ“‰ Challenge 3: ëŒ€ê·œëª¨ ë°ì´í„° ì¡°íšŒ ì„±ëŠ¥ (Query Performance)
* **No Offset Paging:** `OFFSET` ê¸°ë°˜ì˜ í˜ì´ì§•ì€ ë°ì´í„°ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ëŠë ¤ì§€ë¯€ë¡œ, `Cursor` ê¸°ë°˜(ë§ˆì§€ë§‰ ì¡°íšŒ ID ê¸°ì¤€) í˜ì´ì§•ì„ ì ìš©í•˜ì—¬ ì¸ë±ìŠ¤ë¥¼ íƒ€ë„ë¡ ì„¤ê³„.
* [cite_start]**Read Replica í™œìš©:** ì½ê¸° íŠ¸ë˜í”½(ì¡°íšŒ)ì€ Replica DBë¡œ, ì“°ê¸° íŠ¸ë˜í”½ì€ Master DBë¡œ ë¼ìš°íŒ…í•˜ì—¬ ë¶€í•˜ ë¶„ì‚°[cite: 1067].

---

# NEED TO Change
## 3. Application Architecture (Layered)

ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Separation of Concerns)ë¥¼ í†µí•´ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.

```text
src/main/java/com/vani/community
â”œâ”€â”€ controller/       # Presentation Layer: ìš”ì²­ ê²€ì¦ ë° ì‘ë‹µ ì²˜ë¦¬
â”œâ”€â”€ service/          # Business Layer: íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë° í•µì‹¬ ë¡œì§
â”œâ”€â”€ repository/       # Data Access Layer: JPA ë° QueryDSL ì‚¬ìš©
â”œâ”€â”€ domain/           # Entity & DTO: ë°ì´í„° ëª¨ë¸ ì •ì˜
â””â”€â”€ common/           # Global Config: Security, Exception Handler, Utils